# Software Requirements Specification (SRS)
## SaveAndSound — Облачное Java-приложение для управления звуковыми ресурсами

---

## 1. Введение

### 1.1 Назначение
Цель данного документа — формализовать требования к серверному приложению SaveAndSound, которое предоставляет REST API для управления звуковыми файлами, пользователями и создателями контента. Приложение будет развернуто в облаке с использованием Docker и CI/CD, и в будущем дополнено фронтендом.

### 1.2 Область применения
SaveAndSound — это Java-приложение, взаимодействующее с PostgreSQL и контейнеризованное через Docker. Оно предназначено для интеграции с внешними клиентами (веб-интерфейс, мобильные приложения) и может быть развернуто на платформах типа Railway, Render, Heroku.

Приложение реализует ролевую модель доступа, CRUD-операции и логирование действий.

### 1.3 Определения, акронимы и сокращения
- REST API — интерфейс взаимодействия по HTTP
- CI/CD — непрерывная интеграция и доставка
- Docker — платформа контейнеризации
- DTO — Data Transfer Object
- CRUD — Create, Read, Update, Delete
- SaaS / PaaS / IaaS — модели облачного размещения
- JWT - JSON Web Token

### 1.4 Ссылки
- [PostgreSQL Documentation](https://www.postgresql.org/docs/)
- [Docker Documentation](https://docs.docker.com/)
- [GitHub Actions](https://docs.github.com/en/actions)
- [OpenAPI Specification](https://swagger.io/specification/)

---

## 2. Требования пользователя

### 2.1 Программные интерфейсы
Приложение должно взаимодействовать с:
- PostgreSQL (через JDBC) для хранения данных.
- Docker и Docker Compose для контейнеризации и управления окружением.
- CI/CD-системами (GitHub Actions, Railway) для автоматизации сборки, тестирования и деплоя.
- Внешними REST-клиентами.
- В будущем — с фронтендом через HTTP API (React).

### 2.2 Интерфейс пользователя
На текущем этапе взаимодействие осуществляется через REST API. Для этого используются следующие методы: GET, POST, PUT, DELETE. В будущем будет реализован веб-интерфейс.

| Действие пользователя | Реакция системы |
|-----------------------|-----------------|
| `GET /users`          | Возвращает список пользователей (администраторы). |
| `POST /users`         | Регистрирует нового пользователя. |
| `GET /users/{id}`     | Возвращает информацию о пользователе по ID (администраторы). |
| `PUT /users/{id}`     | Обновляет данные пользователя (администраторы или сам пользователь). |
| `DELETE /users/{id}`  | Удаляет пользователя (администраторы). |
| `POST /auth/login`    | Авторизация пользователя (получение JWT). |
| `GET /sounds`         | Возвращает список звуковых файлов (с фильтрацией и пагинацией). |
| `POST /sounds`        | Добавляет звуковой файл (создатели контента). |
| `GET /sounds/{id}`    | Возвращает информацию о звуковом файле по ID. |
| `PUT /sounds/{id}`    | Обновляет данные звукового файла (создатели контента). |
| `DELETE /sounds/{id}` | Удаляет звуковой файл (создатели контента). |
| `POST /playlists`     | Создает плейлист (зарегистрированные пользователи). |
| `GET /playlists`      | Возвращает список плейлистов (с фильтрацией и пагинацией). |
| `GET /playlists/{id}` | Возвращает информацию о плейлисте по ID. |
| `PUT /playlists/{id}` | Обновляет данные плейлиста (владелец плейлиста). |
| `DELETE /playlists/{id}` | Удаляет плейлист (владелец плейлиста). |
| `POST /playlists/{playlistId}/sounds/{soundId}` | Добавляет звуковой файл в плейлист (владелец плейлиста). |
| `DELETE /playlists/{playlistId}/sounds/{soundId}` | Удаляет звуковой файл из плейлиста (владелец плейлиста). |
| `POST /sounds/{soundId}/like` | Добавляет лайк к звуковому файлу (зарегистрированные пользователи). |
| `DELETE /sounds/{soundId}/like` | Удаляет лайк к звуковому файлу (зарегистрированные пользователи). |

### 2.3 Характеристики пользователей
- **Администраторы** — полный доступ к API, управление пользователями, звуковыми файлами, плейлистами.
- **Создатели контента** — добавление, редактирование и удаление звуковых файлов, создание и управление плейлистами.
- **Пользователи** — просмотр звуковых файлов, плейлистов, добавление лайков, создание и управление своими плейлистами.

Все группы предполагаются как технически грамотные, работающие через API или веб-интерфейс.

### 2.4 Предположения и зависимости
- Docker и PostgreSQL доступны в окружении.
- CI/CD настроен для автоматического тестирования и деплоя.
- API будет использоваться внешними клиентами.
- Приложение развёртывается в облаке (Railway, Render, Heroku).
- Фронтенд будет реализован отдельно и подключён к API.
- Для авторизации используется JWT.
- Для хранения файлов используется облачное хранилище (например, AWS S3 или Google Cloud Storage), или локальное хранилище.

---

## 3. Системные требования

### 3.1 Функциональные требования
1. Система должна предоставлять REST API для управления пользователями (CRUD, авторизация с использованием JWT).
2. Система должна предоставлять REST API для управления звуковыми файлами (CRUD, загрузка/выгрузка файлов).
3. Система должна предоставлять REST API для управления плейлистами (CRUD, добавление/удаление звуков).
4. Система должна поддерживать ролевую модель доступа (администратор, создатель, пользователь).
5. Система должна сохранять и извлекать данные из PostgreSQL.
6. Система должна быть контейнеризирована с использованием Docker.
7. Система должна поддерживать автоматическую сборку, тестирование и деплой через CI/CD.
8. Система должна логировать действия и ошибки.
9. Система должна валидировать входные данные.
10. Система должна быть готова к интеграции с фронтендом.
11. Система должна обеспечивать безопасность доступа к API, включая защиту от CSRF, XSS и SQL-инъекций.
12. Система должна позволять пользователям ставить лайки звуковым файлам.

### 3.2 Нефункциональные требования

#### 3.2.1 Атрибуты качества

| Атрибут         | Почему важен                              | Как измеряется                          |
|-----------------|--------------------------------------------|-----------------------------------------|
| Надёжность      | Стабильная работа API и базы данных        | Uptime > 99%, корректные ответы, резервное копирование данных        |
| Масштабируемость| Возможность облачного развертывания        | Поддержка Docker, горизонтальное масштабирование, облачные платформы    |
| Безопасность    | Защита данных и контроль доступа           | Ролевые ограничения, валидация входных данных, шифрование паролей, защита от CSRF, XSS, SQL-инъекций, использование JWT |
| Портативность   | Работа на разных платформах                | Docker-образ совместим с Linux/Windows  |
| Поддерживаемость| Лёгкость обновления и тестирования         | CI/CD пайплайн, модульная архитектура, автоматизированные тесты, логирование ошибок   |
| Расширяемость   | Возможность добавления новых функций       | Чёткая структура API, DTO, слоёв приложения, модульная архитектура  |
| Производительность| Быстрая обработка запросов              | Время ответа < 500 мс для большинства операций при стандартной нагрузке, оптимизация запросов к базе данных, кэширование  |
| Удобство использования | Простота использования API для внешних клиентов | Четкая документация API (OpenAPI/Swagger) |

